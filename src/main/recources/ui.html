<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>CryptoMarket Advanced Trading</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#36e27b",
                        "primary-dark": "#2ab562",
                        "danger": "#ff5252",
                        "background-light": "#f6f8f7",
                        "background-dark": "#112117",
                        "surface-dark": "#162a1f",
                        "surface-darker": "#0e1a14",
                        "border-color": "#254632"
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "1rem", "lg": "2rem", "xl": "3rem", "full": "9999px"},
                },
            },
        }
    </script>
<style>
        /* Custom scrollbar for dark mode pro feel */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #112117; 
        }
        ::-webkit-scrollbar-thumb {
            background: #254632; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #366348; 
        }
        
        .order-book-depth-bg-red {
            background: linear-gradient(90deg, rgba(255,82,82,0.15) 0%, rgba(255,82,82,0) 100%);
        }
        .order-book-depth-bg-green {
            background: linear-gradient(90deg, rgba(54,226,123,0.15) 0%, rgba(54,226,123,0) 100%);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white font-display overflow-hidden h-screen flex flex-col">
<!-- Header -->
<header class="flex items-center justify-between border-b border-border-color bg-surface-dark px-6 py-2 shrink-0 h-16 z-20">
<div class="flex items-center gap-6">
<div class="flex items-center gap-3">
<div class="size-8 text-primary">
<svg class="size-full" fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M47.2426 24L24 47.2426L0.757355 24L24 0.757355L47.2426 24ZM12.2426 21H35.7574L24 9.24264L12.2426 21Z" fill="currentColor" fill-rule="evenodd"></path>
</svg>
</div>
<h1 class="text-white text-xl font-bold tracking-tight">CryptoMarket</h1>
</div>
<div class="h-6 w-[1px] bg-border-color"></div>
<div class="flex items-center gap-4">
<a class="text-primary font-medium text-sm" href="#">Markets</a>
<a class="text-white/70 hover:text-white font-medium text-sm transition" href="#">Trade</a>
<a class="text-white/70 hover:text-white font-medium text-sm transition" href="#">Derivatives</a>
<a class="text-white/70 hover:text-white font-medium text-sm transition" href="#">Earn</a>
</div>
</div>
<div class="flex items-center gap-4">
<label class="relative hidden md:flex items-center">
<span class="absolute left-3 text-white/50 material-symbols-outlined text-[20px]">search</span>
<input class="bg-surface-darker border border-border-color rounded-full py-1.5 pl-10 pr-4 text-sm text-white focus:ring-1 focus:ring-primary focus:border-primary w-64 placeholder-white/30" placeholder="Search (Cmd+K)" type="text"/>
</label>
<div class="flex gap-2">
<button class="size-9 rounded-full bg-surface-darker border border-border-color flex items-center justify-center text-white/70 hover:text-white hover:border-primary/50 transition">
<span class="material-symbols-outlined text-[20px]">settings</span>
</button>
<button class="size-9 rounded-full bg-surface-darker border border-border-color flex items-center justify-center text-white/70 hover:text-white hover:border-primary/50 transition">
<span class="material-symbols-outlined text-[20px]">notifications</span>
</button>
</div>
<div class="flex items-center gap-3 pl-2 border-l border-border-color">
<div class="text-right hidden sm:block">
<p class="text-xs font-bold text-white">Alex Trader</p>
<p class="text-[10px] text-white/50">VIP Level 2</p>
</div>
<div class="size-9 rounded-full bg-cover bg-center border border-border-color" data-alt="User profile avatar abstract pattern" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAJJqRdqJq811c8b0Xi-6awc9ZIZROAnkmc7FIGoDObKBAJF7Vu35kle6GiZtYMmLjC4PNvQRqmhwJ72dusmI4v2w39uCOU_MaRVRpEscC95Zx7ibJmG-0KHvIuBDI9EbQ1ng0YqGxkuevbUUCfATxX8fXrMsDEiIWfIgeyIHU7ROLW9Na1HJPhyT1YwNOpvPViz4JUCjZ1nj00E9LeguyG5O0gyurhSu68asm-QOmfw1oI2rsMnDpouyTvQL8CI6gDsLauD-e8Ys0aA');"></div>
</div>
</div>
</header>
<!-- Main Content Grid -->
<div class="flex flex-1 overflow-hidden">
<!-- LEFT SIDEBAR: Market Watch -->
<aside class="w-72 flex flex-col border-r border-border-color bg-surface-dark hidden lg:flex">
<!-- Market Tabs -->
<div class="flex border-b border-border-color px-2">
<button class="flex-1 py-3 text-sm font-bold text-white border-b-2 border-primary" onclick="loadFavorites()">Favorites</button>
<button class="flex-1 py-3 text-sm font-medium text-white/50 hover:text-white" onclick="loadAll()">All</button>
</div>
<!-- Filters -->
<div class="flex gap-2 p-3">
<button class="px-3 py-1 rounded-full bg-surface-darker border border-border-color text-xs text-white/70 hover:text-white transition">USDT</button>
<button class="px-3 py-1 rounded-full bg-transparent border border-transparent text-xs text-white/40 hover:text-white transition">BTC</button>
<button class="px-3 py-1 rounded-full bg-transparent border border-transparent text-xs text-white/40 hover:text-white transition">ETH</button>
</div>
<!-- List Header -->
<div class="flex px-4 py-2 text-[10px] text-white/40 uppercase font-semibold">
<span class="flex-1">Pair</span>
<span class="flex-1 text-right">Price</span>
<span class="w-16 text-right">24h%</span>
</div>
<!-- List Items -->
<div class="flex-1 overflow-y-auto pb-4" id="marketList">
<!-- Items will be populated by JS -->
</div>
</aside>
<!-- CENTER AREA: Chart & Ticker -->
<main class="flex-1 flex flex-col min-w-0 bg-background-dark">
<!-- Ticker Header -->
<div class="flex flex-wrap items-center justify-between px-6 py-4 border-b border-border-color bg-surface-dark" id="tickerHeader">
<div class="flex items-center gap-6">
<div class="flex items-center gap-2">
<h2 class="text-2xl font-bold text-white tracking-tight" id="tickerSymbol">BTC/USDT</h2>
<span class="bg-surface-darker border border-border-color text-[10px] px-1.5 py-0.5 rounded text-white/60">PERP</span>
</div>
<div class="flex flex-col">
<span class="text-xl font-bold text-primary" id="tickerPrice">$42,150.00</span>
<span class="text-xs text-white/50" id="tickerApprox">≈ $42,150.00</span>
</div>
<div class="hidden xl:flex flex-col pl-4 border-l border-border-color/50">
<span class="text-[10px] text-white/50 uppercase">24h Change</span>
<span class="text-sm font-medium text-primary" id="change24h">+3.25%</span>
</div>
<div class="hidden xl:flex flex-col pl-4 border-l border-border-color/50">
<span class="text-[10px] text-white/50 uppercase">24h High</span>
<span class="text-sm font-medium text-white" id="high24h">42,800.00</span>
</div>
<div class="hidden xl:flex flex-col pl-4 border-l border-border-color/50">
<span class="text-[10px] text-white/50 uppercase">24h Low</span>
<span class="text-sm font-medium text-white" id="low24h">40,500.00</span>
</div>
<div class="hidden xl:flex flex-col pl-4 border-l border-border-color/50">
<span class="text-[10px] text-white/50 uppercase">24h Vol(USDT)</span>
<span class="text-sm font-medium text-white" id="vol24h">1.25B</span>
</div>
</div>
<div class="flex gap-2">
<button class="px-3 py-1.5 rounded-full bg-surface-darker border border-border-color text-xs text-white hover:bg-border-color transition">Guide</button>
<button class="px-3 py-1.5 rounded-full bg-surface-darker border border-border-color text-xs text-white hover:bg-border-color transition">Spot Tutorial</button>
</div>
</div>
<!-- Chart Toolbar & Canvas -->
<div class="flex-1 flex flex-col relative">
<!-- Chart Controls -->
<div class="flex items-center justify-between px-4 py-2 border-b border-border-color bg-surface-darker/50">
<div class="flex items-center gap-1">
<button class="text-xs font-bold text-white/50 hover:text-white px-2 py-1">Time</button>
<div class="h-4 w-[1px] bg-white/10 mx-1"></div>
<button class="text-xs font-bold text-white/50 hover:text-white px-2 py-1 rounded-full hover:bg-white/5">1m</button>
<button class="text-xs font-bold text-white/50 hover:text-white px-2 py-1 rounded-full hover:bg-white/5">5m</button>
<button class="text-xs font-bold text-white/50 hover:text-white px-2 py-1 rounded-full hover:bg-white/5">15m</button>
<button class="text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded-full">1H</button>
<button class="text-xs font-bold text-white/50 hover:text-white px-2 py-1 rounded-full hover:bg-white/5">4H</button>
<button class="text-xs font-bold text-white/50 hover:text-white px-2 py-1 rounded-full hover:bg-white/5">1D</button>
<div class="h-4 w-[1px] bg-white/10 mx-1"></div>
<button class="flex items-center gap-1 text-xs font-medium text-white px-2 py-1 hover:bg-white/5 rounded">
<span class="material-symbols-outlined text-[16px]">show_chart</span>
                            Indicators
                        </button>
</div>
<div class="flex items-center gap-3">
</div>
</div>
<!-- Main Chart Area (SVG Visualization) -->
<div class="flex-1 relative bg-background-dark p-4 overflow-hidden" id="chartArea">
<div class="absolute inset-0 flex items-center justify-center opacity-5 pointer-events-none">
<span class="text-6xl font-bold text-white">BTC/USDT</span>
</div>
<!-- Simulating a complex chart with SVG -->
<svg class="w-full h-full" preserveaspectratio="none" viewbox="0 0 1000 400" id="chartSvg">
<!-- Grid Lines -->
<path d="M0 100 H1000 M0 200 H1000 M0 300 H1000" stroke="#254632" stroke-dasharray="4 4" stroke-width="1"></path>
<path d="M200 0 V400 M400 0 V400 M600 0 V400 M800 0 V400" stroke="#254632" stroke-dasharray="4 4" stroke-width="1"></path>
<!-- Candles (Simplified) -->
<g id="candles">
<!-- Candles will be updated by JS -->
<rect fill="#36e27b" height="80" width="10" x="180" y="250"></rect>
<line stroke="#36e27b" stroke-width="2" x1="185" x2="185" y1="230" y2="340"></line>
<!-- More candles -->
</g>
<!-- Moving Average Line -->
<path d="M100 350 C 200 340, 300 300, 400 250 S 500 200, 600 180 S 800 150, 900 140" fill="none" stroke="#eab308" stroke-width="2" id="maLine"></path>
<!-- Volume Bars at bottom -->
<g id="volumes">
<rect fill="#36e27b" height="40" opacity="0.5" width="10" x="180" y="360"></rect>
<!-- More volumes -->
</g>
</svg>
<!-- Floating Price Label -->
<div class="absolute right-0 top-[32%] bg-primary text-surface-darker text-xs font-bold px-2 py-1 rounded-l-md pointer-events-none" id="priceLabel">
                        42,150.00
                    </div>
</div>
</div>
<!-- Bottom Panel: Positions -->
<div class="h-64 border-t border-border-color bg-surface-dark flex flex-col shrink-0">
<div class="flex items-center px-4 border-b border-border-color">
<button class="px-4 py-3 text-sm font-bold text-white border-b-2 border-primary">Positions (1)</button>
<button class="px-4 py-3 text-sm font-medium text-white/50 hover:text-white border-b-2 border-transparent">Open Orders (0)</button>
<button class="px-4 py-3 text-sm font-medium text-white/50 hover:text-white border-b-2 border-transparent">Order History</button>
<button class="px-4 py-3 text-sm font-medium text-white/50 hover:text-white border-b-2 border-transparent">Trade History</button>
<div class="flex-1"></div>
<div class="flex gap-2">
<span class="text-xs text-white/40 flex items-center">Show all pairs</span>
<div class="relative inline-block w-8 mr-2 align-middle select-none transition duration-200 ease-in">
<input class="toggle-checkbox absolute block w-4 h-4 rounded-full bg-white border-4 appearance-none cursor-pointer" id="toggle" name="toggle" type="checkbox"/>
<label class="toggle-label block overflow-hidden h-4 rounded-full bg-surface-darker cursor-pointer border border-border-color" for="toggle"></label>
</div>
</div>
</div>
<div class="flex-1 overflow-auto" id="positionsTable">
<table class="w-full text-left border-collapse">
<thead class="bg-surface-darker sticky top-0 z-10">
<tr>
<th class="px-6 py-2 text-xs font-medium text-white/40">Symbol</th>
<th class="px-6 py-2 text-xs font-medium text-white/40">Size</th>
<th class="px-6 py-2 text-xs font-medium text-white/40">Entry Price</th>
<th class="px-6 py-2 text-xs font-medium text-white/40">Mark Price</th>
<th class="px-6 py-2 text-xs font-medium text-white/40">Liq. Price</th>
<th class="px-6 py-2 text-xs font-medium text-white/40">Margin Ratio</th>
<th class="px-6 py-2 text-xs font-medium text-white/40">PNL (ROE%)</th>
<th class="px-6 py-2 text-xs font-medium text-white/40 text-right">Action</th>
</tr>
</thead>
<tbody class="divide-y divide-border-color" id="positionsBody">
<!-- Positions will be populated by JS -->
<tr class="hover:bg-surface-darker/50 group">
<td class="px-6 py-3">
<div class="flex items-center gap-2">
<div class="w-1 h-4 bg-primary rounded-full"></div>
<span class="text-sm font-bold text-white">BTC/USDT</span>
<span class="text-[10px] bg-primary/20 text-primary px-1 rounded">20x</span>
</div>
</td>
<td class="px-6 py-3">
<div class="flex flex-col">
<span class="text-sm font-medium text-primary">0.500 BTC</span>
<span class="text-[10px] text-white/40">21,075 USDT</span>
</div>
</td>
<td class="px-6 py-3 text-sm text-white/80">41,200.50</td>
<td class="px-6 py-3 text-sm text-white/80">42,150.00</td>
<td class="px-6 py-3 text-sm text-danger/80">39,150.00</td>
<td class="px-6 py-3 text-sm text-white/80">2.4%</td>
<td class="px-6 py-3">
<div class="flex flex-col">
<span class="text-sm font-bold text-primary">+474.75 USDT</span>
<span class="text-[10px] text-primary">+45.12%</span>
</div>
</td>
<td class="px-6 py-3 text-right">
<button class="text-xs font-medium text-white bg-surface-darker border border-border-color hover:bg-border-color px-3 py-1 rounded-full transition">Close</button>
</td>
</tr>
</tbody>
</table>
<div class="p-8 text-center" style="display:none;" id="emptyPositions">
<p class="text-white/30 text-sm">No open positions</p>
</div>
</div>
</div>
</main>
<!-- RIGHT SIDEBAR: Order Book & Entry -->
<aside class="w-80 flex flex-col border-l border-border-color bg-surface-dark">
<!-- Order Book -->
<div class="flex-1 flex flex-col min-h-0 border-b border-border-color">
<div class="flex items-center justify-between px-4 py-2 border-b border-border-color">
<h3 class="text-sm font-bold text-white">Order Book</h3>
</div>
<div class="flex px-4 py-1 text-[10px] text-white/40 uppercase font-semibold">
<span class="flex-1">Price(USDT)</span>
<span class="flex-1 text-right">Amount(Quantity)</span>
<span class="flex-1 text-right">Total</span>
</div>
<!-- Sells (Red) -->
<div class="flex-1 overflow-hidden flex flex-col-reverse pb-1" id="sellOrders">
<!-- Sell orders populated by JS -->
<div class="relative flex px-4 py-0.5 hover:bg-surface-darker cursor-pointer">
<div class="absolute inset-0 order-book-depth-bg-red w-[30%] right-0 ml-auto"></div>
<span class="flex-1 text-xs text-danger font-medium relative z-10">42,155.50</span>
<span class="flex-1 text-right text-xs text-white/80 relative z-10">0.052</span>
<span class="flex-1 text-right text-xs text-white/40 relative z-10">2.1K</span>
</div>
<!-- More -->
</div>
<!-- Last Price -->
<div class="py-2 px-4 border-y border-border-color bg-surface-darker flex items-center justify-center gap-2" id="lastPrice">
<span class="text-lg font-bold text-primary">42,150.00</span>
<span class="material-symbols-outlined text-[16px] text-primary">arrow_upward</span>
<span class="text-xs text-white/50">$42,150.00</span>
</div>
<!-- Buys (Green) -->
<div class="flex-1 overflow-hidden pt-1" id="buyOrders">
<!-- Buy orders populated by JS -->
<div class="relative flex px-4 py-0.5 hover:bg-surface-darker cursor-pointer">
<div class="absolute inset-0 order-book-depth-bg-green w-[25%] right-0 ml-auto"></div>
<span class="flex-1 text-xs text-primary font-medium relative z-10">42,149.50</span>
<span class="flex-1 text-right text-xs text-white/80 relative z-10">0.041</span>
<span class="flex-1 text-right text-xs text-white/40 relative z-10">1.7K</span>
</div>
<!-- More -->
</div>
</div>
<!-- Order Entry Form -->
<div class="p-4 bg-surface-dark" id="orderForm">
<!-- Buy/Sell Toggle -->
<div class="flex bg-surface-darker p-1 rounded-full mb-4" id="buySellToggle">
<button class="flex-1 py-1.5 rounded-full bg-primary text-surface-darker font-bold text-sm shadow-lg" id="buyBtn">Buy</button>
<button class="flex-1 py-1.5 rounded-full text-white/70 font-medium text-sm hover:text-white" id="sellBtn">Sell</button>
</div>
<div class="flex justify-between items-center mb-3">
<button class="flex items-center gap-1 text-xs text-white/70 bg-surface-darker px-2 py-1 rounded border border-border-color" id="orderType">
                        Limit <span class="material-symbols-outlined text-[14px]">expand_more</span>
</button>
<span class="text-xs text-white/40" id="availBalance">Avail: <span class="text-white">14,250 USDT</span></span>
</div>
<!-- Inputs -->
<div class="space-y-3">
<div class="relative">
<span class="absolute left-3 top-2.5 text-xs text-white/40">Price</span>
<input class="w-full bg-surface-darker border border-border-color rounded-xl py-2 pl-12 pr-12 text-right text-white font-medium focus:ring-1 focus:ring-primary focus:border-primary text-sm" type="text" id="priceInput" value="42,150.00"/>
<span class="absolute right-3 top-2.5 text-xs text-white/40">USDT</span>
</div>
<div class="relative">
<span class="absolute left-3 top-2.5 text-xs text-white/40">Amount</span>
<input class="w-full bg-surface-darker border border-border-color rounded-xl py-2 pl-16 pr-12 text-right text-white font-medium focus:ring-1 focus:ring-primary focus:border-primary text-sm" placeholder="0.00" type="text" id="amountInput"/>
<span class="absolute right-3 top-2.5 text-xs text-white/40">BTC</span>
</div>
</div>
<!-- Slider -->
<div class="mt-4 mb-2 px-1" id="sliderContainer">
<div class="relative h-1 bg-surface-darker rounded-full">
<div class="absolute h-full bg-primary w-1/2 rounded-full" id="sliderFill"></div>
<div class="absolute h-3 w-3 bg-white rounded-full top-1/2 -translate-y-1/2 left-1/2 shadow cursor-pointer" id="sliderHandle"></div>
<!-- Ticks -->
<div class="absolute w-1 h-1 bg-white/20 rounded-full top-1/2 -translate-y-1/2 left-0"></div>
<div class="absolute w-1 h-1 bg-white/20 rounded-full top-1/2 -translate-y-1/2 left-1/4"></div>
<div class="absolute w-1 h-1 bg-white/20 rounded-full top-1/2 -translate-y-1/2 left-2/4"></div>
<div class="absolute w-1 h-1 bg-white/20 rounded-full top-1/2 -translate-y-1/2 left-3/4"></div>
<div class="absolute w-1 h-1 bg-white/20 rounded-full top-1/2 -translate-y-1/2 right-0"></div>
</div>
</div>
<!-- Total -->
<div class="flex justify-between items-center my-4 pt-4 border-t border-border-color/50 border-dashed" id="totalDisplay">
<span class="text-xs text-white/40">Total</span>
<span class="text-sm font-bold text-white" id="totalAmount">0.00 USDT</span>
</div>
<!-- Action Button -->
<button class="w-full bg-primary hover:bg-primary-dark text-surface-darker font-bold py-3 rounded-full shadow-lg shadow-primary/20 transition transform active:scale-[0.98]" id="placeOrderBtn" onclick="placeOrder()">
                    Buy BTC
                </button>
<div class="flex justify-between mt-4">
<div class="flex items-center gap-1">
<input class="rounded border-border-color bg-surface-darker text-primary focus:ring-0 w-3 h-3" type="checkbox" id="tpSl"/>
<span class="text-[10px] text-white/50">TP/SL</span>
</div>
<div class="flex items-center gap-1">
<input class="rounded border-border-color bg-surface-darker text-primary focus:ring-0 w-3 h-3" type="checkbox" id="reduceOnly"/>
<span class="text-[10px] text-white/50">Reduce Only</span>
</div>
</div>
</div>
</aside>
</div>
<script>
let currentSymbol = 'BTC';
let orderBook = { sells: [], buys: [] };
let positions = [];

function updateMarketList(symbols) {
    const list = document.getElementById('marketList');
    list.innerHTML = '';
    symbols.forEach(item => {
        const sym = typeof item === 'string' ? item : item.symbol;
        const price = item.price ? '$' + parseFloat(item.price).toFixed(2) : '—';
        const change = item.change ? item.change + '%' : '';
        const changeClass = item.change && parseFloat(item.change) >= 0 ? 'text-primary' : 'text-danger';
        const itemDiv = document.createElement('div');
        itemDiv.className = 'flex items-center px-4 py-2.5 cursor-pointer hover:bg-surface-darker/50 border-l-2 border-transparent';
        itemDiv.innerHTML = `
            <div class="flex items-center gap-2 flex-1">
                <span class="material-symbols-outlined text-[14px] text-white/20 hover:text-primary transition">star</span>
                <div>
                    <p class="text-sm font-medium text-white/90 leading-none">${sym}</p>
                    <p class="text-[10px] text-white/40 mt-0.5">Vol 1.2B</p>
                </div>
            </div>
            <div class="text-right">
                <p class="text-sm font-medium text-white/90 leading-none">${price}</p>
            </div>
            <div class="w-16 text-right pl-2">
                <span class="text-xs font-medium ${changeClass}">${change}</span>
            </div>
        `;
        itemDiv.onclick = () => selectSymbol(sym);
        list.appendChild(itemDiv);
    });
}

function selectSymbol(sym) {
    currentSymbol = sym;
    document.getElementById('tickerSymbol').textContent = sym + '/USDT';
    // Call Java to fetch data
    if (window.javaBridge) {
        window.javaBridge.fetchData(sym);
    }
}

function updateTicker(data) {
    document.getElementById('tickerPrice').textContent = '$' + parseFloat(data.price).toFixed(2);
    document.getElementById('change24h').textContent = (parseFloat(data.change) >= 0 ? '+' : '') + parseFloat(data.change).toFixed(2) + '%';
    if (data.high) document.getElementById('high24h').textContent = parseFloat(data.high).toFixed(2);
    if (data.low) document.getElementById('low24h').textContent = parseFloat(data.low).toFixed(2);
    if (data.vol) document.getElementById('vol24h').textContent = parseFloat(data.vol).toLocaleString();
    // Update change color
    const changeEl = document.getElementById('change24h');
    changeEl.className = parseFloat(data.change) >= 0 ? 'text-sm font-medium text-primary' : 'text-sm font-medium text-danger';
}

function updateOrderBook(sells, buys) {
    const sellDiv = document.getElementById('sellOrders');
    sellDiv.innerHTML = '';
    sells.forEach(order => {
        const div = document.createElement('div');
        div.className = 'relative flex px-4 py-0.5 hover:bg-surface-darker cursor-pointer';
        div.innerHTML = `<div class="absolute inset-0 order-book-depth-bg-red w-[30%] right-0 ml-auto"></div>
            <span class="flex-1 text-xs text-danger font-medium relative z-10">${order.price}</span>
            <span class="flex-1 text-right text-xs text-white/80 relative z-10">${order.amount}</span>
            <span class="flex-1 text-right text-xs text-white/40 relative z-10">${order.total}</span>`;
        sellDiv.appendChild(div);
    });

    const buyDiv = document.getElementById('buyOrders');
    buyDiv.innerHTML = '';
    buys.forEach(order => {
        const div = document.createElement('div');
        div.className = 'relative flex px-4 py-0.5 hover:bg-surface-darker cursor-pointer';
        div.innerHTML = `<div class="absolute inset-0 order-book-depth-bg-green w-[30%] right-0 ml-auto"></div>
            <span class="flex-1 text-xs text-success font-medium relative z-10">${order.price}</span>
            <span class="flex-1 text-right text-xs text-white/80 relative z-10">${order.amount}</span>
            <span class="flex-1 text-right text-xs text-white/40 relative z-10">${order.total}</span>`;
        buyDiv.appendChild(div);
    });
}

function placeOrder() {
    const type = document.getElementById('buyBtn').classList.contains('bg-primary') ? 'buy' : 'sell';
    const price = document.getElementById('priceInput').value;
    const amount = document.getElementById('amountInput').value;
    if (window.javaBridge) {
        window.javaBridge.placeOrder(type, price, amount);
    }
}

function loadFavorites() {
    if (window.javaBridge) {
        window.javaBridge.getTopSymbols();
    }
}

function loadAll() {
    if (window.javaBridge) {
        window.javaBridge.getAllSymbols();
    }
}

// Initial load
updateMarketList(['BTC', 'ETH', 'SOL', 'XRP']);</script>
</body></html></content>
<parameter name="filePath">src/main/resources/ui.html